(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fce2d62"],{1276:function(t,s,i){"use strict";var e=i("d784"),a=i("44e7"),n=i("825a"),r=i("1d80"),o=i("4840"),c=i("8aa5"),d=i("50c4"),l=i("14c3"),u=i("9263"),h=i("d039"),f=[].push,g=Math.min,v=4294967295,p=!h((function(){return!RegExp(v,"y")}));e("split",2,(function(t,s,i){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var e=String(r(this)),n=void 0===i?v:i>>>0;if(0===n)return[];if(void 0===t)return[e];if(!a(t))return s.call(e,t,n);var o,c,d,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,p=new RegExp(t.source,h+"g");while(o=u.call(p,e)){if(c=p.lastIndex,c>g&&(l.push(e.slice(g,o.index)),o.length>1&&o.index<e.length&&f.apply(l,o.slice(1)),d=o[0].length,g=c,l.length>=n))break;p.lastIndex===o.index&&p.lastIndex++}return g===e.length?!d&&p.test("")||l.push(""):l.push(e.slice(g)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:s.call(this,t,i)}:s,[function(s,i){var a=r(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,a,i):e.call(String(a),s,i)},function(t,a){var r=i(e,t,this,a,e!==s);if(r.done)return r.value;var u=n(t),h=String(this),f=o(u,RegExp),m=u.unicode,C=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),S=new f(p?u:"^(?:"+u.source+")",C),b=void 0===a?v:a>>>0;if(0===b)return[];if(0===h.length)return null===l(S,h)?[h]:[];var k=0,L=0,_=[];while(L<h.length){S.lastIndex=p?L:0;var x,y=l(S,p?h:h.slice(L));if(null===y||(x=g(d(S.lastIndex+(p?0:L)),h.length))===k)L=c(h,L,m);else{if(_.push(h.slice(k,L)),_.length===b)return _;for(var $=1;$<=y.length-1;$++)if(_.push(y[$]),_.length===b)return _;L=k=x}}return _.push(h.slice(k)),_}]}),!p)},"159b":function(t,s,i){var e=i("da84"),a=i("fdbc"),n=i("17c2"),r=i("9112");for(var o in a){var c=e[o],d=c&&c.prototype;if(d&&d.forEach!==n)try{r(d,"forEach",n)}catch(l){d.forEach=n}}},"17c2":function(t,s,i){"use strict";var e=i("b727").forEach,a=i("a640"),n=i("ae40"),r=a("forEach"),o=n("forEach");t.exports=r&&o?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,s,i){"use strict";var e=i("23e7"),a=i("17c2");e({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"55e5":function(t,s,i){},"9d57":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"boxs"},t._l(t.orderData,(function(s,e){return i("div",{key:e,staticClass:"OrderItem"},[i("div",{staticClass:"left-item"},[i("img",{staticClass:"auto-img",attrs:{src:s.small_img,alt:""}})]),i("div",{staticClass:"right-item"},[i("div",{staticClass:"item-top"},[i("div",{staticClass:"big-name"},[i("div",{staticClass:"top-name"},[t._v(t._s(s.name))]),i("div",{staticClass:"top-rule"},[t._v(t._s(s.rule))])]),i("div",{staticClass:"top-enname"},[t._v(t._s(s.enname))])]),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"bot-price"},[t._v("¥"+t._s(s.price))]),i("div",{staticClass:"bot-count"},[t._v("x "+t._s(s.count))])])])])})),0)},a=[],n=(i("55e5"),{name:"OrderItem",props:["orderData"],created:function(){},data:function(){return{}}}),r=n,o=i("2877"),c=Object(o["a"])(r,e,a,!1,null,null,null);s["a"]=c.exports},b0c0:function(t,s,i){var e=i("83ab"),a=i("9bf2").f,n=Function.prototype,r=n.toString,o=/^\s*function ([^ (]*)/,c="name";e&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},ca9a:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"orderClosing"},[i("van-nav-bar",{attrs:{fixed:"",title:"订单结算","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),i("div",{staticClass:"topImg auto-img"}),i("div",{staticClass:"orderBox"},[i("div",{staticClass:"order-tips"},[t._v("商品信息 :")]),i("div",{staticClass:"order-content"},[i("OrderItem",{attrs:{orderData:t.orderData}})],1),i("div",{staticClass:"total-Price"},[i("div",{staticClass:"wenzi"},[t._v("共计 : "+t._s(t.orderData.length)+" 件")]),i("div",{staticClass:"count"},[t._v("合计 : ¥ "+t._s(t.total))])])]),i("div",{staticClass:"DC-info"},[i("div",{staticClass:"info-tips"},[t._v("配送信息 :")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addressList,expression:"addressList"}],staticClass:"user-box"},[i("div",{staticClass:"user"},[i("div",{staticClass:"userName"},[i("span",{staticClass:"dian"}),t._v(t._s(t.addressList.name))]),i("div",{staticClass:"phone"},[t._v(t._s(t.addressList.tel))])]),i("div",{staticClass:"address"},[t._v(t._s(t.addressList.address))])]),i("div",{staticClass:"other-address",on:{click:t.otherAddress}},[i("div",{staticClass:"left"},[t._v("其他地址")]),i("div",{staticClass:"right"},[i("van-icon",{attrs:{name:"arrow"}})],1)]),t._m(0)]),i("div",{staticClass:"btns"},[i("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.noWpay}},[t._v("确认结算")])],1),i("van-popup",{style:{height:"50%"},attrs:{round:"",closeable:"","close-icon":"close",position:"bottom"},model:{value:t.isOpen,callback:function(s){t.isOpen=s},expression:"isOpen"}},[i("div",{staticClass:"address-box"},[i("div",{staticClass:"title"},[t._v("选择地址")]),i("van-address-list",{attrs:{switchable:"",list:t.list,"default-tag-text":"默认"},on:{"click-item":t.changAddress,add:t.add,edit:t.edit},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1)])],1)},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"esti-time"},[i("div",{staticClass:"lefts"},[t._v("预计送达时间")]),i("div",{staticClass:"rights"},[t._v("18:00")])])}],n=(i("99af"),i("4160"),i("b0c0"),i("ac1f"),i("1276"),i("159b"),i("cac0"),i("9d57")),r={name:"OrderClosing",data:function(){return{orderData:[],sids:[],tokenString:"",total:0,addressList:"",isOpen:!1,list:[],chosenAddressId:""}},components:{OrderItem:n["a"]},created:function(){this.sids=this.$route.query.sids.split("-"),this.getCommit(),this.getAddRess()},methods:{otherAddress:function(){this.isOpen=!this.isOpen},goBack:function(){this.$router.go(-1)},sum:function(){var t=0;this.orderData.forEach((function(s){t+=s.price*s.count})),this.total=t},getCommit:function(){var t=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"GET",url:"/commitShopcart",params:{tokenString:this.tokenString,sids:JSON.stringify(this.sids)}}).then((function(s){t.$toast.clear(),5e4===s.data.code&&(t.orderData=s.data.result,t.sum(),0===s.data.result.length&&t.$router.push({name:"Shopbag"}))})).catch((function(t){console.log("eer==>",t)}))},getAddRess:function(){var t=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return console.log("没有token值"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"GET",url:"/findAddress",params:{tokenString:this.tokenString}}).then((function(s){if(700==s.data.code)return t.$toast({message:s.data.msg,forbidClick:!0,duration:500}),t.$router.push({name:"Login"});if(2e4==s.data.code){for(var i=s.data.result,e=0;e<i.length;e++)i[e].isDefault=Boolean(i[e].isDefault),i[e].address="".concat(i[e].province).concat(i[e].city).concat(i[e].county).concat(i[e].addressDetail),!0===i[e].isDefault&&(t.addressList=i[e],t.chosenAddressId=i[e].id);t.list=s.data.result}})).catch((function(t){console.log("eer==>",t)}))},changAddress:function(t){this.addressList=t,this.chosenAddressId=t.id,this.isOpen=!1},add:function(){this.$router.push({name:"AddNewRess"})},edit:function(t){var s=t.aid;this.$router.push({name:"AddNewRess",params:{aid:s}})},noWpay:function(){var t=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"POST",url:"/pay",data:{tokenString:this.tokenString,sids:JSON.stringify(this.sids),phone:this.addressList.tel,address:this.addressList,receiver:this.name}}).then((function(s){t.$toast.clear(),6e4===s.data.code&&(t.$toast.loading({message:s.data.msg,forbidClick:!0,dutation:500}),setTimeout((function(){t.$router.push({name:"PayComplete"})}),2500))})).catch((function(t){console.log("eer==>",t)}))}}},o=r,c=i("2877"),d=Object(c["a"])(o,e,a,!1,null,null,null);s["default"]=d.exports},cac0:function(t,s,i){},fdbc:function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-4fce2d62.3d0fdc04.js.map