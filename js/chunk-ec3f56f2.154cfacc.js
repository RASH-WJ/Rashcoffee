(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec3f56f2"],{"0a76":function(t,a,e){t.exports=e.p+"img/Mymessage.07bf6f0f.gif"},"159b":function(t,a,e){var i=e("da84"),s=e("fdbc"),o=e("17c2"),r=e("9112");for(var n in s){var c=i[n],l=c&&c.prototype;if(l&&l.forEach!==o)try{r(l,"forEach",o)}catch(d){l.forEach=o}}},"164b":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"OrderPage"},[e("van-nav-bar",{attrs:{fixed:"",title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),e("Mymessage",[e("div",{staticClass:"order-box"},[e("van-tabs",{on:{change:t.changeOrderPage},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"全部"}},[t.AllOrderData.length<=0?e("van-empty",{attrs:{description:"您暂时还没有订单哦!"}}):t._e(),t._l(t.AllOrderData,(function(a,i){return e("div",{key:i,staticClass:"all-box"},[e("div",{staticClass:"box-top"},[e("div",{staticClass:"top-left"},[t._v(t._s(a.oid))]),1==a.status?e("div",{staticClass:"right1 top-right",on:{click:function(e){return t.changeState(a,i)}}},[t._v("确认收货")]):e("div",{staticClass:"right2 top-right",on:{click:function(e){return t.removeOrder(a,i)}}},[t._v("已完成 "),e("van-icon",{attrs:{name:"delete-o"}})],1)]),e("div",{staticClass:"box-content"},[e("OrderItem",{attrs:{orderData:a.data}})],1),e("div",{staticClass:"box-bottom"},[e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(a.proInfo.data,"yyyy-MM-dd hh:mm:ss")))]),e("div",{staticClass:"bottom-item"},[e("div",{staticClass:"bot-left"},[t._v("共计 "+t._s(a.proInfo.count)+" 件")]),e("div",{staticClass:"bot-right"},[t._v("合计 ¥ "+t._s(a.proInfo.total))])])])])}))],2),e("van-tab",{attrs:{title:"进行中"}},[t.ConductOrderData.length<=0?e("van-empty",{attrs:{description:"您暂时还没有进行中订单哦!"}}):t._e(),t._l(t.ConductOrderData,(function(a,i){return e("div",{key:i,staticClass:"conIng-box all-box"},[e("div",{staticClass:"box-top"},[e("div",{staticClass:"top-left"},[t._v(t._s(a.oid))]),e("div",{staticClass:"top-right",on:{click:function(e){return t.changeState(a,i)}}},[t._v("确认收货 ")])]),e("div",{staticClass:"box-content"},[e("OrderItem",{attrs:{orderData:a.data}})],1),e("div",{staticClass:"box-bottom"},[e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(a.proInfo.data,"yyyy-MM-dd hh:mm:ss")))]),e("div",{staticClass:"bottom-item"},[e("div",{staticClass:"bot-left"},[t._v("共计 "+t._s(a.proInfo.count)+" 件")]),e("div",{staticClass:"bot-right"},[t._v("合计 ¥ "+t._s(a.proInfo.total))])])])])}))],2),e("van-tab",{attrs:{title:"已完成"}},[t.CompleteOrderData.length<=0?e("van-empty",{attrs:{description:"您暂时还没有已完成的订单哦!"}}):t._e(),t._l(t.CompleteOrderData,(function(a,i){return e("div",{key:i,staticClass:"completed-box all-box"},[e("div",{staticClass:"box-top"},[e("div",{staticClass:"top-left"},[t._v(t._s(a.oid))]),e("div",{staticClass:"top-right",on:{click:function(e){return t.removeOrder(a,i)}}},[t._v("已完成 "),e("van-icon",{attrs:{name:"delete-o"}})],1)]),e("div",{staticClass:"box-content"},[e("OrderItem",{attrs:{orderData:a.data}})],1),e("div",{staticClass:"box-bottom"},[e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(a.proInfo.data,"yyyy-MM-dd hh:mm:ss")))]),e("div",{staticClass:"bottom-item"},[e("div",{staticClass:"bot-left"},[t._v("共计 "+t._s(a.proInfo.count)+" 件")]),e("div",{staticClass:"bot-right"},[t._v("合计 ¥ "+t._s(a.proInfo.total))])])])])}))],2)],1)],1)])],1)},s=[],o=(e("4160"),e("c975"),e("a434"),e("159b"),e("edc2")),r=(e("8ea8"),e("9d57")),n={name:"OrderPage",data:function(){return{active:0,tokenString:"",AllOrderData:[],ConductOrderData:[],CompleteOrderData:[],oldPath:null}},components:{Mymessage:o["a"],OrderItem:r["a"]},created:function(){this.getOrderData(0)},methods:{goBack:function(){"/paycomplete"==this.oldPath?this.$router.push({name:"Main"}):this.$router.go(-1)},getOrderData:function(t){var a=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"GET",url:"/findOrder",params:{tokenString:this.tokenString,status:t}}).then((function(t){if(a.$toast.clear(),7e4===t.data.code){var e=[],i=[];t.data.result.forEach((function(t){if(t.small_img=t.smallImg,-1===i.indexOf(t.oid)){var a={oid:t.oid,status:t.status,proInfo:{data:t.updatedAt,count:0,total:0},data:[]};i.push(t.oid),e.push(a)}})),e.forEach((function(a){t.data.result.forEach((function(t){a.oid===t.oid&&(a.data.push(t),a.proInfo.count+=t.count,a.proInfo.total+=t.count*t.price)}))})),a.AllOrderData=e,a.ConductOrderData=[],a.CompleteOrderData=[],a.AllOrderData.forEach((function(t){1===t.status?a.ConductOrderData.push(t):2===t.status&&a.CompleteOrderData.push(t)}))}})).catch((function(t){console.log("eer==>",t)}))},changeState:function(t,a){var e=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"POST",url:"/receive",data:{tokenString:this.tokenString,oid:t.oid}}).then((function(i){e.$toast.clear(),8e4===i.data.code&&(t.status=2,1==e.active&&e.ConductOrderData.splice(a,1)),e.$toast.loading({message:i.data.msg,forbidClick:!0,dutation:500})})).catch((function(t){console.log("eer==>",t)}))},changeOrderPage:function(t){this.getOrderData(t)},removeOrder:function(t,a){var e=this;if(this.tokenString=this.$cookies.get("tokenString"),!this.tokenString)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,dutation:500}),this.axios({method:"POST",url:"/removeOrder",data:{tokenString:this.tokenString,oid:t.oid}}).then((function(t){e.$toast.clear(),9e4===t.data.code&&e.AllOrderData.splice(a,1),e.$toast.loading({message:t.data.msg,forbidClick:!0,dutation:500})})).catch((function(t){console.log("eer==>",t)}))}},beforeRouteEnter:function(t,a,e){e((function(t){t.oldPath=a.path}))}},c=n,l=e("2877"),d=Object(l["a"])(c,i,s,!1,null,null,null);a["default"]=d.exports},"17c2":function(t,a,e){"use strict";var i=e("b727").forEach,s=e("a640"),o=e("ae40"),r=s("forEach"),n=o("forEach");t.exports=r&&n?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var i=e("23e7"),s=e("17c2");i({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"55e5":function(t,a,e){},5642:function(t,a,e){},"8ea8":function(t,a,e){},"9d57":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"boxs"},t._l(t.orderData,(function(a,i){return e("div",{key:i,staticClass:"OrderItem"},[e("div",{staticClass:"left-item"},[e("img",{staticClass:"auto-img",attrs:{src:a.small_img,alt:""}})]),e("div",{staticClass:"right-item"},[e("div",{staticClass:"item-top"},[e("div",{staticClass:"big-name"},[e("div",{staticClass:"top-name"},[t._v(t._s(a.name))]),e("div",{staticClass:"top-rule"},[t._v(t._s(a.rule))])]),e("div",{staticClass:"top-enname"},[t._v(t._s(a.enname))])]),e("div",{staticClass:"item-bottom"},[e("div",{staticClass:"bot-price"},[t._v("¥"+t._s(a.price))]),e("div",{staticClass:"bot-count"},[t._v("x "+t._s(a.count))])])])])})),0)},s=[],o=(e("55e5"),{name:"OrderItem",props:["orderData"],created:function(){},data:function(){return{}}}),r=o,n=e("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);a["a"]=c.exports},a434:function(t,a,e){"use strict";var i=e("23e7"),s=e("23cb"),o=e("a691"),r=e("50c4"),n=e("7b0b"),c=e("65f0"),l=e("8418"),d=e("1dde"),u=e("ae40"),f=d("splice"),h=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,m=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,a){var e,i,d,u,f,h,C=n(this),b=r(C.length),_=s(t,b),O=arguments.length;if(0===O?e=i=0:1===O?(e=0,i=b-_):(e=O-2,i=m(v(o(a),0),b-_)),b+e-i>g)throw TypeError(p);for(d=c(C,i),u=0;u<i;u++)f=_+u,f in C&&l(d,u,C[f]);if(d.length=i,e<i){for(u=_;u<b-i;u++)f=u+i,h=u+e,f in C?C[h]=C[f]:delete C[h];for(u=b;u>b-i+e;u--)delete C[u-1]}else if(e>i)for(u=b-i;u>_;u--)f=u+i-1,h=u+e-1,f in C?C[h]=C[f]:delete C[h];for(u=0;u<e;u++)C[u+_]=arguments[u+2];return C.length=b-i+e,d}})},edc2:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"MyMessage"},[t._m(0),e("div",{staticClass:"box"},[t._t("default")],2)])},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"topImg"},[i("img",{staticClass:"auto-img",attrs:{src:e("0a76"),alt:""}})])}],o=(e("5642"),{name:"Mymessage"}),r=o,n=e("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);a["a"]=c.exports},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-ec3f56f2.154cfacc.js.map